<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>英文單字背誦練習</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 40px;
            font-size: 3rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 4px 8px rgba(102, 126, 234, 0.2);
            position: relative;
        }

        h1::before {
            content: "✨";
            position: absolute;
            left: -60px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2rem;
            animation: sparkle 2s ease-in-out infinite alternate;
        }

        h1::after {
            content: "📚";
            position: absolute;
            right: -60px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2rem;
            animation: sparkle 2s ease-in-out infinite alternate-reverse;
        }

        @keyframes sparkle {
            0% {
                transform: translateY(-50%) scale(1);
                opacity: 0.7;
            }

            100% {
                transform: translateY(-50%) scale(1.2);
                opacity: 1;
            }
        }

        .setup-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .instructions {
            color: #495057;
            margin-bottom: 25px;
            line-height: 1.8;
            font-size: 1.1rem;
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
            border-radius: 12px;
            border: 1px solid rgba(102, 126, 234, 0.1);
        }

        .program-description {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .input-format {
            font-size: 1rem;
            color: #6c757d;
        }

        .instructions strong {
            color: #495057;
            background: #e9ecef;
            padding: 2px 6px;
            border-radius: 4px;
        }

        .custom-words-input {
            width: 100%;
            min-height: 120px;
            margin-bottom: 20px;
            padding: 20px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 1rem;
            font-family: 'Microsoft JhengHei', monospace;
            resize: vertical;
            transition: all 0.3s ease;
            background: white;
        }

        .custom-words-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .level-select {
            padding: 10px;
            font-size: 1rem;
            border: 2px solid #ddd;
            border-radius: 5px;
            background-color: white;
            cursor: pointer;
            margin-bottom: 20px;
            min-width: 180px;
        }

        .practice-section {
            display: none;
            text-align: center;
        }

        .practice-section.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .mode-toggle {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background: #f8f9fa;
            border-radius: 50px;
            padding: 5px;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
        }

        .mode-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            background: transparent;
            color: #6c757d;
        }

        .mode-btn.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .word-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            color: white;
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.3);
        }

        .word-display {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 15px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .hint {
            font-size: 1.2rem;
            opacity: 0.9;
            font-weight: 300;
        }

        .typing-area {
            max-width: 500px;
            margin: 0 auto;
        }

        .input-group {
            position: relative;
            margin-bottom: 20px;
        }

        input[type="text"] {
            width: 100%;
            padding: 20px;
            font-size: 1.3rem;
            border: 3px solid #e9ecef;
            border-radius: 15px;
            outline: none;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 500;
            background: white;
        }

        input[type="text"]:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 5px rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .btn {
            padding: 15px 30px;
            margin: 8px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover:not(:disabled) {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .btn:disabled {
            background: #e9ecef;
            color: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .feedback {
            margin-top: 20px;
            min-height: 40px;
            font-size: 1.2rem;
            font-weight: 600;
            padding: 15px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .feedback.correct {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.3);
        }

        .feedback.incorrect {
            background: linear-gradient(135deg, #dc3545, #fd7e14);
            color: white;
            box-shadow: 0 8px 25px rgba(220, 53, 69, 0.3);
        }

        .stats {
            display: none;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 40px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
        }

        .stats.active {
            display: grid;
        }

        .stat-item {
            text-align: center;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }

        .stat-item:hover {
            transform: translateY(-5px);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #6c757d;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .key-instructions {
            text-align: center;
            margin-top: 20px;
            color: #6c757d;
            font-size: 0.9rem;
            padding: 15px;
            background: rgba(102, 126, 234, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(102, 126, 234, 0.1);
        }

        .no-words-message {
            text-align: center;
            color: #6c757d;
            font-size: 1.1rem;
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
            }

            h1 {
                font-size: 2.2rem;
            }

            h1::before,
            h1::after {
                display: none;
            }

            .word-display {
                font-size: 2.2rem;
            }

            .btn {
                padding: 12px 20px;
                font-size: 0.9rem;
                margin: 5px;
            }

            input[type="text"] {
                font-size: 1.1rem;
                padding: 15px;
            }
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>英文單字背誦練習</h1>

        <div class="setup-section" id="setupSection">
            <div class="instructions">
                <div class="program-description">
                    🎯 透過互動式打字練習，讓孩子們更快速、有效地記憶英文單字！
                </div>
                <div class="input-format">
                    📝 請選擇單字等級，或自訂單字（格式：英文:中文，每行一個）
                </div>
            </div>
            <div style="text-align:center; margin-bottom: 20px;">
                <select class="level-select" id="levelSelect">
                    <option value="default">基礎單字</option>
                    <option value="Howdy 1 Unit 1">Howdy 1 Unit 1</option>
                    <option value="Howdy 1 Unit 2">Howdy 1 Unit 2</option>
                    <option value="Howdy 1 Unit 3">Howdy 1 Unit 3</option>
                    <option value="Howdy 1 Unit 4">Howdy 1 Unit 4</option>
                    <option value="Howdy 1 Unit 5">Howdy 1 Unit 5</option>
                    <option value="Howdy 1 Unit 6">Howdy 1 Unit 6</option>
                    <option value="Howdy 1 Unit 7">Howdy 1 Unit 7</option>
                    <option value="Howdy 1 Unit 8">Howdy 1 Unit 8</option>
                    <option value="Howdy 2 Unit 1">Howdy 2 Unit 1</option>
                    <option value="Howdy 2 Unit 2">Howdy 2 Unit 2</option>
                    <option value="Howdy 2 Unit 3">Howdy 2 Unit 3</option>
                    <option value="Howdy 2 Unit 4">Howdy 2 Unit 4</option>
                    <option value="Howdy 2 Unit 5">Howdy 2 Unit 5</option>
                    <option value="Howdy 2 Unit 6">Howdy 2 Unit 6</option>
                    <option value="Howdy 2 Unit 7">Howdy 2 Unit 7</option>
                    <option value="Howdy 2 Unit 8">Howdy 2 Unit 8</option>
                    <option value="Howdy 6 Unit 1">Howdy 6 Unit 1</option>
                    <option value="Howdy 6 Unit 2">Howdy 6 Unit 2</option>
                    <option value="Howdy 6 Unit 3">Howdy 6 Unit 3</option>
                    <option value="Howdy 6 Unit 4">Howdy 6 Unit 4</option>
                    <option value="Howdy 6 Unit 5">Howdy 6 Unit 5</option>
                    <option value="Howdy 6 Unit 6">Howdy 6 Unit 6</option>
                    <option value="Howdy 6 Unit 7">Howdy 6 Unit 7</option>
                    <option value="Howdy 6 Unit 8">Howdy 6 Unit 8</option>
                    <option value="custom">自訂單字</option>
                </select>
            </div>
            <textarea class="custom-words-input" id="customWords" style="display:none" placeholder="✏️ 請輸入單字，每行一個，格式：英文:中文

例如：
apple:蘋果
banana:香蕉
computer:電腦
beautiful:美麗的"></textarea>
            <div style="text-align: center;">
                <button class="btn btn-primary" id="saveCustomBtn" style="display:none">🚀 載入單字開始練習</button>
            </div>
        </div>

        <div class="practice-section" id="practiceSection">
            <div class="mode-toggle">
                <button class="mode-btn active" id="normalMode">📖 一般模式</button>
                <button class="mode-btn" id="scrambledMode">🔀 字母亂序</button>
            </div>

            <div class="word-card">
                <div class="word-display" id="wordDisplay">準備開始練習</div>
                <div class="hint" id="hint">點擊開始練習按鈕</div>
            </div>

            <div class="typing-area">
                <div class="input-group">
                    <input type="text" id="userInput" placeholder="✍️ 請輸入英文單字..." disabled>
                </div>

                <div>
                    <button class="btn btn-primary" id="checkBtn" disabled>✅ 檢查答案</button>
                    <button class="btn btn-primary" id="startBtn">▶️ 開始練習</button>
                    <button class="btn btn-secondary" id="nextBtn" disabled>➡️ 下一題</button>
                    <button class="btn btn-secondary" id="backBtn" style="display: none;">🏠 回到主畫面</button>
                </div>

                <div class="feedback" id="feedback"></div>

                <div class="key-instructions">
                    ⌨️ 小提示：按 Enter 鍵可以快速檢查答案或前往下一題
                </div>
            </div>
        </div>

        <div class="stats" id="stats">
            <div class="stat-item">
                <div class="stat-value" id="correctCount">0</div>
                <div class="stat-label">✅ 答對</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="incorrectCount">0</div>
                <div class="stat-label">❌ 答錯</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="accuracy">0%</div>
                <div class="stat-label">📊 正確率</div>
            </div>
        </div>
    </div>

    <script>
        // 預設單字
        const defaultWords = [
            { word: "apple", chinese: "蘋果" },
            { word: "banana", chinese: "香蕉" },
            { word: "cat", chinese: "貓" },
            { word: "dog", chinese: "狗" },
            { word: "elephant", chinese: "大象" },
            { word: "fox", chinese: "狐狸" },
            { word: "goat", chinese: "山羊" },
            { word: "hippo", chinese: "河馬" },
            { word: "insect", chinese: "昆蟲" },
            { word: "jaguar", chinese: "美洲獅" }
        ];

        // 各等級單字
        const wordLevels = {
            "Howdy 1 Unit 1": [
                { word: "Peter", chinese: "人名 P_ _ _ _" },
                { word: "Grace", chinese: "人名 G_ _ _ _" },
                { word: "Lucy", chinese: "人名 L_ _ _ y" },
                { word: "Lynn", chinese: "人名 L_ _ _ n" },
                { word: "Steve", chinese: "人名 S_ _ _ _" },
                { word: "Good morning", chinese: "早安" },
                { word: "Jennifer", chinese: "人名 J_ _ _ _ _ _ _" },
                { word: "Good afternoon", chinese: "午安" },
                { word: "Yuma", chinese: "人名 Y_ _ _ _" },
                { word: "Good evening", chinese: "晚安" },
                { word: "Mr. Clark", chinese: "人名 Mr. _ _ _ _ _" },
                { word: "Good-bye", chinese: "再見" },
                { word: "Tim", chinese: "人名 T_ _ _" },
                { word: "Sam", chinese: "人名 S_ _ _" }
            ],

            "Howdy 1 Unit 2": [
                { word: "one", chinese: "1" },
                { word: "nine", chinese: "9" },
                { word: "two", chinese: "2" },
                { word: "ten", chinese: "10" },
                { word: "three", chinese: "3" },
                { word: "rabbit", chinese: "兔子" },
                { word: "four", chinese: "4" },
                { word: "cat", chinese: "貓" },
                { word: "five", chinese: "5" },
                { word: "dog", chinese: "狗" },
                { word: "six", chinese: "6" },
                { word: "bird", chinese: "小鳥" },
                { word: "seven", chinese: "7" },
                { word: "eight", chinese: "8" }
            ],

            "Howdy 1 Unit 3": [
                { word: "father", chinese: "父親" },
                { word: "short", chinese: "矮的、短的" },
                { word: "mother", chinese: "母親" },
                { word: "grandpa", chinese: "爺爺、外公" },
                { word: "brother", chinese: "哥哥/弟弟" },
                { word: "grandma", chinese: "奶奶、外婆" },
                { word: "sister", chinese: "姊姊/妹妹" },
                { word: "young", chinese: "幼小的" },
                { word: "baby", chinese: "寶寶" },
                { word: "old", chinese: "老的、舊的" },
                { word: "chubby", chinese: "圓胖的" },
                { word: "pretty", chinese: "漂亮的" },
                { word: "thin", chinese: "瘦的" },
                { word: "tall", chinese: "高的" }
            ],

            "Howdy 1 Unit 4": [
                { word: "book", chinese: "書" },
                { word: "circle", chinese: "圓圈" },
                { word: "pencil", chinese: "鉛筆" },
                { word: "square", chinese: "正方形" },
                { word: "pen", chinese: "筆、鋼筆" },
                { word: "triangle", chinese: "三角形" },
                { word: "eraser", chinese: "橡皮擦、板擦" },
                { word: "heart", chinese: "心型" },
                { word: "crayon", chinese: "蠟筆" },
                { word: "diamond", chinese: "菱形、鑽石" },
                { word: "ruler", chinese: "尺" },
                { word: "pencil case", chinese: "鉛筆盒" },
                { word: "schoolbag", chinese: "書包" }
            ],
            "Howdy 1 Unit 5": [
                { word: "tiger", chinese: "虎" },
                { word: "long", chinese: "長的" },
                { word: "lion", chinese: "獅" },
                { word: "short", chinese: "短的、矮的" },
                { word: "monkey", chinese: "猴" },
                { word: "huge", chinese: "非常巨大的" },
                { word: "snake", chinese: "蛇" },
                { word: "small", chinese: "小的" },
                { word: "hippo", chinese: "河馬" },
                { word: "elephant", chinese: "象" },
                { word: "giraffe", chinese: "長頸鹿" },
                { word: "zebra", chinese: "斑馬" }
            ],

            "Howdy 1 Unit 6": [
                { word: "computer game", chinese: "電腦遊戲" },
                { word: "blocks", chinese: "積木" },
                { word: "teddy bear", chinese: "玩具熊" },
                { word: "new", chinese: "新的" },
                { word: "toy car", chinese: "玩具車" },
                { word: "old", chinese: "舊的、老的" },
                { word: "robot", chinese: "機器人" },
                { word: "fun", chinese: "有趣的" },
                { word: "doll", chinese: "洋娃娃" },
                { word: "boring", chinese: "無聊的" },
                { word: "puzzle", chinese: "拼圖" },
                { word: "board game", chinese: "棋盤遊戲" }
            ],

            "Howdy 1 Unit 7": [
                { word: "skateboard", chinese: "滑板" },
                { word: "orange", chinese: "橘色" },
                { word: "rollerblades", chinese: "直排輪" },
                { word: "shirt", chinese: "襯衫(男式)" },
                { word: "bicycle (bike)", chinese: "腳踏車" },
                { word: "shorts", chinese: "短褲(兩腿褲)" },
                { word: "socks", chinese: "襪子(雙)" },
                { word: "helmet", chinese: "頭盔、安全帽" },
                { word: "sneakers", chinese: "運動鞋(雙)" },
                { word: "yellow", chinese: "黃" },
                { word: "pink", chinese: "粉紅" },
                { word: "red", chinese: "紅" },
                { word: "green", chinese: "綠" },
                { word: "blue", chinese: "藍" },
                { word: "white", chinese: "白" }
            ],

            "Howdy 1 Unit 8": [
                { word: "closet", chinese: "衣櫥" },
                { word: "behind", chinese: "在…下面" },
                { word: "chair", chinese: "椅子" },
                { word: "yard", chinese: "院子" },
                { word: "table", chinese: "桌子" },
                { word: "kitchen", chinese: "廚房" },
                { word: "sofa", chinese: "沙發" },
                { word: "living room", chinese: "客廳" },
                { word: "TV", chinese: "電視" },
                { word: "bedroom", chinese: "臥室" },
                { word: "in", chinese: "在…裡面" },
                { word: "bathroom", chinese: "浴室" },
                { word: "on", chinese: "在…上面" },
                { word: "under", chinese: "在…下面" }
            ],
            "Howdy 2 Unit 1": [
                { word: "eleven", chinese: "11" },
                { word: "twenty-one", chinese: "21" },
                { word: "twelve", chinese: "12" },
                { word: "twenty-two", chinese: "22" },
                { word: "thirteen", chinese: "13" },
                { word: "twenty-three", chinese: "23" },
                { word: "fourteen", chinese: "14" },
                { word: "twenty-four", chinese: "24" },
                { word: "fifteen", chinese: "15" },
                { word: "twenty-five", chinese: "25" },
                { word: "sixteen", chinese: "16" },
                { word: "twenty-six", chinese: "26" },
                { word: "seventeen", chinese: "17" },
                { word: "twenty-seven", chinese: "27" },
                { word: "eighteen", chinese: "18" },
                { word: "twenty-eight", chinese: "28" },
                { word: "nineteen", chinese: "19" },
                { word: "twenty-nine", chinese: "29" },
                { word: "twenty", chinese: "20" },
                { word: "thirty", chinese: "30" }
            ],
            "Howdy 2 Unit 2": [
                { word: "first", chinese: "第1的" },
                { word: "next", chinese: "緊鄰的" },
                { word: "second", chinese: "第2的" },
                { word: "last", chinese: "最後的" },
                { word: "third", chinese: "第3的" },
                { word: "seventh", chinese: "第7的" },
                { word: "fourth", chinese: "第4的" },
                { word: "eighth", chinese: "第8的" },
                { word: "fifth", chinese: "第5的" },
                { word: "ninth", chinese: "第9的" },
                { word: "sixth", chinese: "第6的" },
                { word: "tenth", chinese: "第10的" }
            ],
            "Howdy 2 Unit 3": [
                { word: "school", chinese: "學校" },
                { word: "supermarket", chinese: "超級市場" },
                { word: "library", chinese: "圖書館" },
                { word: "train station", chinese: "火車站" },
                { word: "bank", chinese: "銀行" },
                { word: "next to", chinese: "緊鄰著" },
                { word: "post office", chinese: "郵局" },
                { word: "near", chinese: "在…附近" },
                { word: "park", chinese: "公園" },
                { word: "bookstore", chinese: "書局" },
                { word: "across from", chinese: "在…的對面" },
                { word: "department store", chinese: "百貨公司" }
            ],
            "Howdy 2 Unit 4": [
                { word: "sing", chinese: "唱歌" },
                { word: "well", chinese: "很好地" },
                { word: "dance", chinese: "跳舞" },
                { word: "piano", chinese: "鋼琴" },
                { word: "run", chinese: "跑" },
                { word: "drums", chinese: "鼓" },
                { word: "swim", chinese: "游泳" },
                { word: "violin", chinese: "小提琴" },
                { word: "hop", chinese: "單腳跳" },
                { word: "flute", chinese: "長笛" },
                { word: "jump", chinese: "跳躍" }
            ],
            "Howdy 2 Unit 5": [
                { word: "T-shirt", chinese: "短袖圓領上衣" },
                { word: "gray", chinese: "灰色的" },
                { word: "shoes", chinese: "鞋子" },
                { word: "brown", chinese: "棕色的" },
                { word: "pants", chinese: "褲子" },
                { word: "cute", chinese: "可愛的" },
                { word: "jacket", chinese: "夾克" },
                { word: "ugly", chinese: "難看的" },
                { word: "slippers", chinese: "拖鞋" },
                { word: "hat", chinese: "帽子" },
                { word: "raincoat", chinese: "雨衣" },
                { word: "sweater", chinese: "毛衣" }
            ],
            "Howdy 2 Unit 6": [
                { word: "watermelon", chinese: "西瓜" },
                { word: "vegetables", chinese: "蔬菜" },
                { word: "banana", chinese: "香蕉" },
                { word: "carrot", chinese: "胡蘿蔔" },
                { word: "guava", chinese: "芭樂" },
                { word: "onion", chinese: "洋蔥" },
                { word: "apple", chinese: "蘋果" },
                { word: "cabbage", chinese: "高麗菜" },
                { word: "orange", chinese: "柳橙" },
                { word: "pumpkin", chinese: "南瓜" },
                { word: "pear", chinese: "梨子" }
            ],
            "Howdy 2 Unit 7": [
                { word: "head", chinese: "頭" },
                { word: "nose", chinese: "鼻子" },
                { word: "hand", chinese: "手" },
                { word: "mouth", chinese: "嘴巴" },
                { word: "arm", chinese: "手臂" },
                { word: "eye", chinese: "眼睛" },
                { word: "leg", chinese: "腿" },
                { word: "shoulder", chinese: "肩膀" },
                { word: "knee", chinese: "膝蓋" },
                { word: "weak", chinese: "虛弱的" },
                { word: "ear", chinese: "耳朵" },
                { word: "toe", chinese: "腳趾" },
                { word: "finger", chinese: "手指" },
                { word: "strong", chinese: "強壯的" }
            ],
            "Howdy 2 Unit 8": [
                { word: "Monday", chinese: "星期一" },
                { word: "Saturday", chinese: "星期六" },
                { word: "Tuesday", chinese: "星期二" },
                { word: "Sunday", chinese: "星期日" },
                { word: "Wednesday", chinese: "星期三" },
                { word: "Chinese", chinese: "國語；中文" },
                { word: "Thursday", chinese: "星期四" },
                { word: "music", chinese: "音樂" },
                { word: "Friday", chinese: "星期五" },
                { word: "art", chinese: "美術" },
                { word: "math", chinese: "數學" },
                { word: "English", chinese: "英語；英文" },
                { word: "science", chinese: "科學" }
            ],
            "Howdy 6 Unit 1": [
                { word: "comic book", chinese: "漫畫" },
                { word: "tell", chinese: "告訴；說" },
                { word: "amusement park", chinese: "遊樂園" },
                { word: "tomorrow", chinese: "明天" },
                { word: "later", chinese: "較晚的；以後" },
                { word: "weekend", chinese: "周末" },
                { word: "museum", chinese: "博物館" },
                { word: "meet", chinese: "遇見；會見" },
                { word: "sea", chinese: "海" },
                { word: "borrow", chinese: "借" },
                { word: "dinosaur", chinese: "恐龍" },
                { word: "exercise", chinese: "運動；練習" },
                { word: "dolphin", chinese: "海豚" },
                { word: "come", chinese: "來" },
                { word: "killer whale", chinese: "殺人鯨" }
            ],

            "Howdy 6 Unit 2": [
                { word: "student", chinese: "學生" },
                { word: "land", chinese: "陸地" },
                { word: "shark", chinese: "鯊魚" },
                { word: "island", chinese: "島" },
                { word: "whale", chinese: "鯨魚" },
                { word: "ticket", chinese: "(車)票" },
                { word: "seal", chinese: "海豹" },
                { word: "sale", chinese: "拍賣" },
                { word: "sea turtle", chinese: "海龜" },
                { word: "sell", chinese: "賣" },
                { word: "octopus", chinese: "章魚" },
                { word: "bake", chinese: "烘；烤" },
                { word: "squid", chinese: "烏賊" },
                { word: "more", chinese: "更多的" },
                { word: "penguin", chinese: "企鵝" }
            ],

            "Howdy 6 Unit 3": [
                { word: "dessert", chinese: "甜點" },
                { word: "large", chinese: "大的；多的" },
                { word: "doughnuts", chinese: "甜甜圈" },
                { word: "favorite", chinese: "最喜愛的人或物" },
                { word: "cream bun", chinese: "奶油餐包" },
                { word: "food", chinese: "食物" },
                { word: "moon cake", chinese: "月餅" },
                { word: "drinks", chinese: "飲料" },
                { word: "candy bar", chinese: "燒心糖果" },
                { word: "price", chinese: "價格；價錢" },
                { word: "chocolate", chinese: "巧克力" },
                { word: "start", chinese: "開始" },
                { word: "finish", chinese: "完成；結束" }
            ],

            "Howdy 6 Unit 4": [
                { word: "question", chinese: "問題" },
                { word: "hungry", chinese: "飢餓的" },
                { word: "answer", chinese: "答案" },
                { word: "happy", chinese: "高興的" },
                { word: "hour", chinese: "小時" },
                { word: "wave", chinese: "波浪" },
                { word: "minute", chinese: "分鐘" },
                { word: "beautiful", chinese: "美麗的；漂亮的" },
                { word: "second", chinese: "秒；片刻" },
                { word: "beach", chinese: "海灘" },
                { word: "captain", chinese: "隊長；船長；機長" },
                { word: "seashell", chinese: "貝殼" },
                { word: "sick", chinese: "生病的；想吐的" },
                { word: "find", chinese: "找到；發現" },
                { word: "tired", chinese: "疲倦的" }
            ],

            "Howdy 6 Unit 5": [
                { word: "starfish", chinese: "海星" },
                { word: "tiny", chinese: "微小的" },
                { word: "crab", chinese: "螃蟹" },
                { word: "live", chinese: "住；居住" },
                { word: "ray", chinese: "魟魚" },
                { word: "pool", chinese: "水池" },
                { word: "sea horse", chinese: "海馬" },
                { word: "bumpy", chinese: "凹凸不平的" },
                { word: "bones", chinese: "骨頭" },
                { word: "flat", chinese: "平的；平坦的" },
                { word: "sign", chinese: "記號；標誌" },
                { word: "rough", chinese: "粗糙的" },
                { word: "tank", chinese: "水缸" },
                { word: "smooth", chinese: "光滑的；平靜的" },
                { word: "world", chinese: "世界" }
            ],

            "Howdy 6 Unit 6": [
                { word: "plant", chinese: "植物" },
                { word: "dark blue", chinese: "深藍色的" },
                { word: "coral", chinese: "珊瑚" },
                { word: "light blue", chinese: "淺藍色的" },
                { word: "lobster", chinese: "龍蝦" },
                { word: "shrimp", chinese: "蝦子" },
                { word: "eel", chinese: "鰻魚" },
                { word: "guy", chinese: "朋友；小伙子；人" },
                { word: "jellyfish", chinese: "水母" },
                { word: "fat", chinese: "胖的" },
                { word: "change", chinese: "改變；交換" },
                { word: "strange", chinese: "奇怪的" },
                { word: "colorful", chinese: "富有色彩的" },
                { word: "quick", chinese: "快的；迅速的" },
                { word: "clear", chinese: "清澈的；清楚的" }
            ],

            "Howdy 6 Unit 7": [
                { word: "show", chinese: "表演" },
                { word: "give", chinese: "給；給予" },
                { word: "camera", chinese: "照相機" },
                { word: "send", chinese: "發送；寄送" },
                { word: "picture", chinese: "照片" },
                { word: "take a picture", chinese: "照相；拍照" },
                { word: "earring", chinese: "耳環；耳飾" },
                { word: "gift", chinese: "禮物" },
                { word: "necklace", chinese: "項鍊" },
                { word: "tie", chinese: "領帶" },
                { word: "postcards", chinese: "明信片" },
                { word: "ring", chinese: "戒指" },
                { word: "letter", chinese: "信" },
                { word: "scary", chinese: "可怕的；嚇人的" },
                { word: "sharp", chinese: "銳利的；尖的" }
            ],

            "Howdy 6 Unit 8": [
                { word: "knight", chinese: "騎士" },
                { word: "strong", chinese: "強壯的" },
                { word: "hero", chinese: "英雄" },
                { word: "brave", chinese: "勇敢的；英勇的" },
                { word: "ghost", chinese: "鬼；幽靈" },
                { word: "fantastic", chinese: "極好的" },
                { word: "story", chinese: "故事" },
                { word: "prince", chinese: "王子" },
                { word: "joke", chinese: "玩笑" },
                { word: "princess", chinese: "公主" },
                { word: "fight", chinese: "打架；爭吵" },
                { word: "dragon", chinese: "龍" },
                { word: "ask", chinese: "詢問" },
                { word: "fire", chinese: "火" },
                { word: "die", chinese: "死" }
            ],
        };

        // Elements
        const setupSection = document.getElementById('setupSection');
        const practiceSection = document.getElementById('practiceSection');
        const wordDisplay = document.getElementById('wordDisplay');
        const hint = document.getElementById('hint');
        const userInput = document.getElementById('userInput');
        const checkBtn = document.getElementById('checkBtn');
        const startBtn = document.getElementById('startBtn');
        const nextBtn = document.getElementById('nextBtn');
        const backBtn = document.getElementById('backBtn');
        const feedback = document.getElementById('feedback');
        const correctCount = document.getElementById('correctCount');
        const incorrectCount = document.getElementById('incorrectCount');
        const accuracy = document.getElementById('accuracy');
        const customWords = document.getElementById('customWords');
        const saveCustomBtn = document.getElementById('saveCustomBtn');
        const normalModeBtn = document.getElementById('normalMode');
        const scrambledModeBtn = document.getElementById('scrambledMode');
        const stats = document.getElementById('stats');
        const levelSelect = document.getElementById('levelSelect');

        // App state
        let currentWord = "";
        let currentChinese = "";
        let displayedWord = "";
        let words = [...defaultWords];
        let correct = 0;
        let incorrect = 0;
        let wordsToReview = [];
        let isScrambledMode = false;
        let isCheckPhase = true;

        // 下拉選單切換
        levelSelect.addEventListener('change', function () {
            const selectedLevel = levelSelect.value;
            if (selectedLevel === 'custom') {
                customWords.style.display = 'block';
                saveCustomBtn.style.display = 'inline-block';
            } else {
                customWords.style.display = 'none';
                saveCustomBtn.style.display = 'none';
                if (selectedLevel === 'default') {
                    words = [...defaultWords];
                } else if (wordLevels[selectedLevel]) {
                    words = wordLevels[selectedLevel].map(item => ({
                        word: item.word,
                        chinese: item.chinese
                    }));
                }
                showPracticeInterface();
                resetGame();
                alert(`已載入 ${selectedLevel === 'default' ? '基礎單字' : selectedLevel + ' 單'}！`);
            }
        });

        // 儲存自訂單字
        saveCustomBtn.addEventListener('click', function () {
            const originalText = saveCustomBtn.innerHTML;
            saveCustomBtn.innerHTML = '<span class="loading"></span> 載入中...';
            saveCustomBtn.disabled = true;

            setTimeout(() => {
                const lines = customWords.value.trim().split('\n');
                const customWordList = [];

                lines.forEach(line => {
                    if (line.trim()) {
                        const parts = line.split(':');
                        if (parts.length >= 2) {
                            const english = parts[0].trim().toLowerCase();
                            const chinese = parts.slice(1).join(':').trim();
                            if (english && chinese) {
                                customWordList.push({ word: english, chinese: chinese });
                            }
                        }
                    }
                });

                if (customWordList.length > 0) {
                    words = customWordList;
                    showPracticeInterface();
                    resetGame();
                    alert(`🎉 已成功載入 ${words.length} 個單字！`);
                } else {
                    alert('❌ 請確認單字格式正確，例如：apple:蘋果');
                }

                saveCustomBtn.innerHTML = originalText;
                saveCustomBtn.disabled = false;
            }, 500);
        });

        // 模式切換
        normalModeBtn.addEventListener('click', function () {
            isScrambledMode = false;
            normalModeBtn.classList.add('active');
            scrambledModeBtn.classList.remove('active');
            if (currentChinese) {
                updateWordDisplay();
            }
        });

        scrambledModeBtn.addEventListener('click', function () {
            isScrambledMode = true;
            scrambledModeBtn.classList.add('active');
            normalModeBtn.classList.remove('active');
            if (currentChinese) {
                updateWordDisplay();
            }
        });

        // 開始練習
        startBtn.addEventListener('click', function () {
            resetGame();
            nextWord();
            userInput.disabled = false;
            checkBtn.disabled = false;
            startBtn.disabled = true;
            userInput.focus();
            isCheckPhase = true;
        });

        // 檢查答案
        checkBtn.addEventListener('click', function () {
            checkAnswer();
            isCheckPhase = false;
        });

        // 下一題
        nextBtn.addEventListener('click', function () {
            goToNextWord();
        });

        // 回主畫面
        backBtn.addEventListener('click', function () {
            backToMain();
        });

        // Enter 鍵快速操作
        userInput.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                if (isCheckPhase && !checkBtn.disabled) {
                    checkAnswer();
                    isCheckPhase = false;
                } else if (!isCheckPhase && !nextBtn.disabled) {
                    goToNextWord();
                }
            }
        });

        // 顯示練習介面
        function showPracticeInterface() {
            setupSection.style.display = 'none';
            practiceSection.classList.add('active');
            stats.classList.add('active');
            startBtn.disabled = false;
        }

        // 下一題
        function goToNextWord() {
            nextWord();
            userInput.value = '';
            feedback.textContent = '';
            feedback.className = 'feedback';
            nextBtn.disabled = true;
            checkBtn.disabled = false;
            userInput.focus();
            isCheckPhase = true;
        }

        // 字母亂序
        function scrambleWord(word) {
            const letters = word.split('');
            for (let i = letters.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [letters[i], letters[j]] = [letters[j], letters[i]];
            }
            const scrambled = letters.join('');
            return scrambled === word && word.length > 1 ? scrambleWord(word) : scrambled;
        }

        // 顯示單字
        function updateWordDisplay() {
            if (isScrambledMode) {
                displayedWord = scrambleWord(currentWord);
                wordDisplay.textContent = displayedWord;
                hint.textContent = `💡 中文意思：${currentChinese}`;
            } else {
                displayedWord = currentChinese;
                wordDisplay.textContent = displayedWord;
                hint.textContent = "💭 請輸入對應的英文單字";
            }
        }

        // 檢查答案
        function checkAnswer() {
            const userTyped = userInput.value.trim().toLowerCase();
            const correctWord = currentWord.toLowerCase();

            if (userTyped === correctWord) {
                feedback.textContent = '🎉 太棒了！答對了！';
                feedback.className = 'feedback correct';
                correct++;
            } else {
                feedback.textContent = `😅 答錯了！正確答案是「${currentWord}」`;
                feedback.className = 'feedback incorrect';
                incorrect++;
                wordsToReview.push({ word: currentWord, chinese: currentChinese });
            }

            // 更新統計
            correctCount.textContent = correct;
            incorrectCount.textContent = incorrect;
            const totalAttempts = correct + incorrect;
            accuracy.textContent = totalAttempts > 0 ? Math.round((correct / totalAttempts) * 100) + '%' : '0%';

            // 按鈕狀態
            checkBtn.disabled = true;
            nextBtn.disabled = false;
        }

        // 取下一個單字
        function nextWord() {
            if (words.length === 0) {
                if (wordsToReview.length > 0) {
                    words = [...wordsToReview];
                    wordsToReview = [];
                    alert("📚 現在練習您答錯的單字！");
                } else {
                    wordDisplay.textContent = "🎊 恭喜完成！";
                    hint.textContent = "所有單字都練習完了，太棒了！";
                    checkBtn.style.display = 'none';
                    nextBtn.style.display = 'none';
                    startBtn.style.display = 'none';
                    backBtn.style.display = 'inline-block';
                    userInput.disabled = true;
                    return;
                }
            }

            // 隨機取單字
            const randomIndex = Math.floor(Math.random() * words.length);
            const wordObj = words.splice(randomIndex, 1)[0];

            currentWord = wordObj.word;
            currentChinese = wordObj.chinese;

            updateWordDisplay();
        }

        // 重置遊戲
        function resetGame() {
            correct = 0;
            incorrect = 0;
            correctCount.textContent = '0';
            incorrectCount.textContent = '0';
            accuracy.textContent = '0%';
            words = [...words];
            wordsToReview = [];
            wordDisplay.textContent = '🎯 準備開始練習';
            hint.textContent = '點擊開始練習按鈕';
            userInput.value = '';
            feedback.textContent = '';
            feedback.className = 'feedback';
            userInput.disabled = true;
            checkBtn.disabled = true;
            nextBtn.disabled = true;
            startBtn.disabled = false;
            checkBtn.style.display = 'inline-block';
            nextBtn.style.display = 'inline-block';
            startBtn.style.display = 'inline-block';
            backBtn.style.display = 'none';
            isCheckPhase = true;
        }

        // 回主畫面
        function backToMain() {
            practiceSection.classList.remove('active');
            setupSection.style.display = 'block';
            stats.classList.remove('active');
            words = [];
            correct = 0;
            incorrect = 0;
            wordsToReview = [];
            currentWord = "";
            currentChinese = "";
            correctCount.textContent = '0';
            incorrectCount.textContent = '0';
            accuracy.textContent = '0%';
            userInput.value = '';
            feedback.textContent = '';
            feedback.className = 'feedback';
            checkBtn.style.display = 'inline-block';
            nextBtn.style.display = 'inline-block';
            startBtn.style.display = 'inline-block';
            backBtn.style.display = 'none';
            userInput.disabled = true;
            checkBtn.disabled = true;
            nextBtn.disabled = true;
            startBtn.disabled = true;
            isCheckPhase = true;
        }
    </script>
</body>

</html>
